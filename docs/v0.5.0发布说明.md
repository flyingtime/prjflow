# v0.5.0 发布说明

**发布日期**: 2025年12月05日

## 版本概述

v0.5.0 版本主要包含Bug指派窗口功能增强、Bug统计页面交互优化、个人工作台完善、权限控制增强、项目成员管理优化、需求编辑功能优化、实体转换功能优化、任务编辑功能优化、项目详情功能完善、需求详情组件封装、任务详情组件封装等多项功能更新。本次版本升级包含多个重要功能增强，提升了系统的易用性、一致性和代码复用性。

## 主要更新

### 1. Bug指派窗口功能增强 🎯

- **备注字段**：指派Bug时可添加备注信息（多行文本）
- **状态下拉框**：指派时可同时更新Bug状态（激活/已解决/已关闭）
- **默认清空指派**：打开窗口时"指派给"字段默认清空，需重新选择（保持必填）
- **字段顺序**：指派给 → 备注 → 状态
- **备注记录**：备注信息记录到Bug历史记录中

### 2. Bug统计页面交互优化 📊

- **统计卡片可点击**：点击跳转到列表页并自动应用筛选条件
- **自动展开搜索**：跳转后自动展开搜索表单
- **视觉反馈**：统计卡片支持鼠标悬停效果
- **支持跳转**：状态、优先级、严重程度统计项均可点击跳转

### 3. 个人工作台功能完善 🏠

- **个性化配置**：支持卡片和Tab的显示/隐藏和排序
- **资源分配列表**：展示本周、本月工时统计和最近记录
- **工作报告列表**：展示日报和周报

### 4. 权限控制增强 🔐

- **按钮级权限控制**：添加 `v-permission` 指令和 `PermissionButton` 组件
- **页面权限控制**：在项目/Bug/任务/需求/测试用例页面应用权限控制
- **管理页面权限**：用户管理、部门管理、权限管理页面完善权限控制

### 5. Bug详情功能优化 🐛

- **详情组件封装**：优化Bug详情组件结构
- **相邻Bug查找**：修复相邻Bug查找问题

### 6. 项目成员管理界面优化 👥

- **用户列显示优化**：项目成员管理列表的用户列显示为"用户名(昵称)"格式
- **显示格式统一**：统一使用昵称显示，提升可读性

### 7. 需求编辑功能优化 📝

- **负责人选择优化**：需求编辑中的"负责人"下拉框改为使用项目成员选择组件
- **只显示项目成员**：负责人选择只显示当前项目的成员，不再显示所有用户
- **显示成员角色**：下拉框中显示成员的角色信息（负责人/成员/查看者）
- **提升用户体验**：未选择项目时显示提示信息，选择更精准

### 8. 实体转换功能优化 🔄

- **需求转换功能**：需求详情和列表页支持"转任务"和"转Bug"功能
- **任务转换功能**：任务详情支持"转需求"和"转Bug"功能
- **Bug转换功能**：Bug详情支持"转需求"功能
- **按钮文本统一**：所有转换按钮统一为"转任务"、"转需求"、"转Bug"格式
- **转换关联**：转换后自动关联原实体，并在描述中记录转换来源

### 9. 任务编辑功能优化 ✅

- **负责人选择优化**：任务编辑中的"负责人"下拉框改为使用项目成员选择组件
- **只显示项目成员**：负责人选择只显示当前项目的成员，不再显示所有用户
- **显示成员角色**：下拉框中显示成员的角色信息（负责人/成员/查看者）
- **统一体验**：与需求编辑保持一致的交互体验

### 10. 项目详情功能完善 🏗️

- **负责人显示**：项目详情基本信息中显示负责人信息
- **负责人编辑**：项目编辑界面支持修改负责人
- **负责人管理**：负责人通过项目成员角色（owner）管理，支持动态变更
- **详情组件封装**：将项目详情内容封装为可复用组件 `ProjectDetailContent`
- **代码复用**：项目详情页面和列表页详情弹窗共用同一组件，减少代码重复

### 11. 需求详情组件封装 📋

- **组件封装**：将需求详情内容封装为可复用组件 `RequirementDetailContent`
- **代码复用**：需求详情页面和列表页详情弹窗共用同一组件，减少代码重复
- **功能完整**：包含需求基本信息、需求描述、历史记录等所有展示内容
- **统一体验**：保持一致的UI风格和交互体验

### 12. 任务详情组件封装 ✅

- **组件封装**：将任务详情内容封装为可复用组件 `TaskDetailContent`
- **代码复用**：任务详情页面和列表页详情弹窗共用同一组件，减少代码重复
- **功能完整**：包含任务基本信息、任务描述、历史记录、依赖任务等所有展示内容
- **统一体验**：保持一致的UI风格和交互体验

### 13. 资源分配列表页面 🕐

- **新增页面**：创建独立的资源分配列表页面 `/resource-allocation`
- **周期筛选**：支持按本周、本月、全部三种周期筛选资源分配
- **用户筛选**：支持按用户筛选资源分配记录
- **项目筛选**：支持按项目筛选资源分配记录
- **日期范围**：自动根据周期设置日期范围，支持自定义日期范围
- **权限控制**：普通用户只能查看自己参与的项目相关的资源分配

### 14. 日报详情路由支持 📄

- **路由支持**：添加 `/reports/daily/:id` 路由，支持直接访问日报详情
- **自动加载**：从路由参数自动加载并显示日报详情
- **错误处理**：加载失败时自动返回列表页，提供友好的错误提示

## 修复的问题

1. ✅ 优化Bug统计页面交互体验，支持快速跳转到筛选后的列表
2. ✅ 修复Bug状态界面解决方案下拉框显示问题
3. ✅ 修复TypeScript编译错误：移除未使用的导入，修复Dashboard类型错误
4. ✅ 优化项目成员管理界面用户列显示格式
5. ✅ 优化需求编辑负责人选择，只显示项目成员
6. ✅ 统一实体转换按钮文本，提升用户体验
7. ✅ 优化任务编辑负责人选择，统一使用项目成员列表
8. ✅ 完善项目详情功能，支持负责人显示和编辑
9. ✅ 封装项目详情组件，提升代码复用性
10. ✅ 封装需求详情组件，减少代码重复，提升可维护性
11. ✅ 封装任务详情组件，减少代码重复，提升可维护性
12. ✅ 修复需求搜索条件和状态下拉菜单的状态选项，移除不存在的状态
13. ✅ 修复任务搜索条件的状态选项，与API定义保持一致
14. ✅ 修复任务卡片跳转的状态参数，将'todo'改为'wait'，'in_progress'改为'doing'
15. ✅ 创建资源分配列表页面，支持按周期（本周/本月/全部）和用户筛选
16. ✅ 添加日报详情路由支持，可通过 `/reports/daily/:id` 访问日报详情
17. ✅ 修复资源分配列表查询失败问题，优化权限过滤逻辑和SQL查询
18. ✅ 优化详情弹窗标题显示，统一为"XX详情"和名称分两行显示，标题居中，名称左对齐

## 升级说明

### 从 v0.4.13 升级

1. **无需数据库迁移**：本次更新不涉及数据库结构变更
2. **前端更新**：需要重新构建前端，更新相关组件
3. **后端更新**：需要重新编译后端，更新 `AssignBug` API 处理逻辑

### 注意事项

- 统计页面的所有统计项现在都可以点击跳转到列表页
- 点击统计项会自动应用相应的筛选条件，方便快速查看相关Bug
- Bug指派窗口新增备注和状态字段，但均为可选，不影响现有使用习惯
- "指派给"字段保持必填，但打开窗口时默认清空，需要重新选择
- 个人工作台支持个性化配置，可根据需要显示/隐藏卡片
- 权限控制已全面应用到各个页面，确保操作安全性
- 项目成员管理界面用户列统一显示"用户名(昵称)"格式
- 需求编辑负责人选择只显示项目成员，选择更精准，提升用户体验
- 实体转换功能统一按钮文本，支持需求、任务、Bug之间的相互转换
- 任务编辑负责人选择统一使用项目成员列表，与需求编辑保持一致
- 项目详情支持负责人显示和编辑，负责人通过项目成员角色管理
- 项目详情组件已封装，可在多个页面复用，减少代码重复
- 需求详情组件已封装，需求详情页面和列表页详情弹窗共用同一组件
- 任务详情组件已封装，任务详情页面和列表页详情弹窗共用同一组件
- 详情组件封装提升了代码复用性和可维护性，统一了UI风格和交互体验
- 需求和任务的搜索条件状态选项已修复，与API定义保持一致
- 需求状态下拉菜单已移除不存在的状态选项，确保状态变更功能正常
- 任务卡片跳转状态参数已修复，项目详情和个人工作台的任务统计卡片跳转状态正确
- 资源分配列表页面已创建，支持按周期和用户筛选，权限控制已优化
- 日报详情路由已支持，可通过URL直接访问日报详情
- 资源分配列表查询问题已修复，SQL查询逻辑已优化，所有测试通过
- 详情弹窗标题已优化，统一显示格式："XX详情"居中显示，具体名称/日期左对齐显示，层次更清晰

---

**版本号**: v0.5.0  
**发布日期**: 2025年12月05日  
**兼容性**: 向后兼容 v0.4.13

