# v0.5.0 发布说明

**发布日期**: 2025年12月05日

## 版本概述

v0.5.0 版本主要包含需求和任务指派功能、Bug指派功能增强、个人工作台完善、权限控制增强、实体转换功能、详情组件封装、微信登录优化等多项功能更新，提升了系统的易用性和代码复用性。

## 主要更新

### 1. 需求和任务指派功能 🎯

- **指派接口**：新增需求和任务指派接口，支持指派时添加备注和修改状态
- **自动状态修改**：需求（draft/reviewing → active）、任务（wait → doing）
- **操作历史**：完整记录指派人变更和状态变更

### 2. Bug指派功能增强 🐛

- **备注和状态**：指派时可添加备注和修改状态
- **操作历史**：备注和状态变更记录到历史记录

### 3. 个人工作台完善 🏠

- **个性化配置**：支持卡片和Tab的显示/隐藏和排序
- **资源分配列表**：展示工时统计和最近记录
- **工作报告列表**：展示日报和周报

### 4. 权限控制增强 🔐

- **按钮级权限**：添加 `v-permission` 指令和 `PermissionButton` 组件
- **页面权限**：在主要页面应用权限控制

### 5. 实体转换功能 🔄

- **相互转换**：需求、任务、Bug之间支持相互转换
- **自动关联**：转换后自动关联原实体

### 6. 详情组件封装 📋

- **组件复用**：项目、需求、任务详情组件封装，减少代码重复
- **统一体验**：保持一致的UI风格和交互体验

### 7. 负责人选择优化 👥

- **项目成员选择**：需求、任务编辑使用项目成员选择组件
- **显示角色**：下拉框显示成员角色信息

### 8. 资源分配列表 🕐

- **周期筛选**：支持按本周、本月、全部筛选
- **多维度筛选**：支持按用户、项目、日期范围筛选

### 9. 微信登录优化 🔐

- **用户名格式**：使用 `{OpenID后8位}_{YYYYMMDD}` 格式
- **权限控制**：只有拥有 `user:create` 权限的用户才能添加用户
- **安全性**：微信登录不再自动创建用户

## 主要修复

1. ✅ 修复Bug统计页面交互，支持快速跳转到筛选后的列表
2. ✅ 修复需求、任务搜索条件的状态选项，与API定义保持一致
3. ✅ 修复资源分配列表查询问题，优化权限过滤逻辑
4. ✅ 优化详情弹窗标题显示格式
5. ✅ 修复微信登录用户名生成逻辑，使用OpenID后8位+日期格式
6. ✅ 新增需求和任务指派功能，支持备注和状态修改

## 升级说明

### 从 v0.4.13 升级

1. **无需数据库迁移**：本次更新不涉及数据库结构变更
2. **前端更新**：需要重新构建前端，更新相关组件
3. **后端更新**：需要重新编译后端，更新API处理逻辑

### 注意事项

- 需求和任务现在支持专门的指派功能，与Bug指派功能保持一致
- 指派时可手动选择状态，不选择则自动修改状态
- 指派时可添加备注信息，备注会记录到历史记录中
- 个人工作台支持个性化配置，可根据需要显示/隐藏卡片
- 权限控制已全面应用到各个页面，确保操作安全性
- 微信登录不再自动创建用户，用户必须先由管理员添加才能登录

---

**版本号**: v0.5.0  
**发布日期**: 2025年12月05日  
**兼容性**: 向后兼容 v0.4.13

